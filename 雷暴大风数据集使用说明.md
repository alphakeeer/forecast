# 雷暴大风人工智能应用数据集使用说明与建模指南

## 一、任务目标与核心思路

你要预测的目标变量是：**逐6分钟的极大风速（标签数据）**
即"未来0--2小时，每6分钟一次"的二维风速分布。

输入特征包括三类： 
1. 雷达特征（Radar features）------表征云体结构、强度、运动趋势
2. 环境场特征（NWP /再分析产品）------表征热力、水汽、不稳定条件
3. 其他辅助信息（可选）------地理、时间、历史时刻信息等。

整体任务是一个 **时空回归问题**： 
\>给定过去一段时间的多源气象观测场（雷达+数值预报），预测未来若干时刻的极大风速空间分布。

------------------------------------------------------------------------

## 二、数据组织与内容结构

### 1. 数据集组成

-   训练集（Train）：约24万样本（4173个过程）
-   A榜测试集（TestA）：约2.9万样本（526个过程）
-   B榜测试集（TestB）：约2.9万样本（538个过程）

| 数据集类型 | 样本数量 | 过程数量 | 用途说明 |
|------------|----------|----------|----------|
| 训练集（Train） | 约24万样本 | 4173个过程 | 提供标签，用于模型训练 |
| A榜测试集（TestA） | 约2.9万样本 | 526个过程 | 仅提供特征，用于调参与自评估 |
| B榜测试集（TestB） | 约2.9万样本 | 538个过程 | 仅提供特征，用于最终评测防止过拟合 |

### 2. 时空组织结构

| 属性 | 内容 | 说明 |
|------|------|------|
| 时间范围 | 5年 | 仅提供月、日、时 |
| 时间分辨率 | 约6分钟 | 每个样本间隔一个雷达体扫时间 |
| 空间范围 | 以雷达站为中心的3°×3°区域 | 约300×300km，对应301×301网格 |
| 空间分辨率 | 0.01°×0.01° | 约1km精度 |
| 样本组织 | 每6分钟一帧二维网格 | 共29.8万样本 |

### 3. 数据格式

-   所有数据为 **numpy `.npy` 文件**
-   行方向：北→南；列方向：西→东；(0,0) 为左上角

### 4. 缺测值标识

| 数据类型 | 缺失值 |
|----------|--------|
| 风速标签 | -9 |
| 雷达特征 | -32768（无回波）、-1280（无有效值） |
| 环境特征 | -9999 |

------------------------------------------------------------------------

## 三、变量说明与建模用途

共33个通道（1标签 + 7雷达 + 25环境），每帧样本形似"33通道气象图像"。

### 1. 标签数据

-   极大风速 (m/s)，二维网格（301×301）

| 特征 | 含义 | 用途 |
|------|------|------|
| 极大风速 | 地面最大风速 (m/s) | 作为模型监督输出 |

### 2. 雷达特征（7个）

| 特征 | 含义 | 物理解释 |
|------|------|----------|
| R05 | 0.5°基本反射率 | 云体强度、降水粒子浓度 |
| V05 / V15 | 0.5°、1.5°径向速度 | 风场结构、入流出流特征 |
| CR | 组合反射率 | 对流强度指示 |
| VIL | 垂直累积液态水含量 | 云体含水量、降水潜势 |
| RG1 / RG2 | 东西/南北反射率梯度 | 风暴锋线锋度 |

### 3. 环境特征（25个）

分三类：

#### 动力与抬升条件

V925、VP01、VP03、VP06、LFC、LCL 等
→ 表征低层风切变和抬升潜势。

#### 水汽条件

Q1000、Q850、RH1000--RH500、TdSfc850 等
→ 表征湿度、比湿分布，判断"上干下湿"结构。

#### 热力与能量条件

T700、DT855、DT705、CAPE、CIN、SBCIN、MLCIN、DCAPE、ITA、H0 等
→ 表征不稳定度与能量释放潜势。

关键变量推荐：**DCAPE, CAPE, VP03, RH700, LCL, T700, DT855**

------------------------------------------------------------------------

## 四、数据使用与建模建议

### 1. 数据读取示例

``` python
import numpy as np
label = np.load(label_path)
radar = np.load(radar_path)   # shape [7, 301, 301]
nwp = np.load(nwp_path)       # shape [25, 167, 167]
```

环境特征需重采样至 0.01° 网格后再拼接。

``` python
X = np.concatenate([radar, nwp_resampled], axis=0)  # shape [32, 301, 301]
y = label                                            # shape [1, 301, 301]
```

### 2. 模型架构建议

-   **ConvLSTM / PhyCell**：时序建模（6分钟间隔）\
-   **U-Net / Swin-UNet**：空间特征提取\
-   **融合模型**：雷达CNN分支 + NWP CNN分支 + 拼接预测

### 3. 损失函数与指标

-   主目标：MSE / MAE 回归损失\
-   辅助指标：强风分类F1（阈值17m/s）\
-   可加空间一致性约束（SSIM Loss）

